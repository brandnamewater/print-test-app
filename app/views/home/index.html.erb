<% content_for :javascript do %>
  <script type="text/javascript">
    ShopifyApp.ready(function(){
      ShopifyApp.Bar.initialize({ title: "Home" });
    });
  </script>
<% end %>
<h2>Products</h2>

<ul>
  <% @products.each do |product| %>
    <li><%= link_to product.title, "https://#{@shop_session.url}/admin/products/#{product.id}", target: "_top" %></li>
  <% end %>
</ul>

<hr>

<h2>Webhooks</h2>

<% if @webhooks.present? %>
  <ul>
    <% @webhooks.each do |webhook| %>
      <li><%= webhook.topic %> : <%= webhook.address %></li>
    <% end %>
  </ul>
<% else %>
  <p>This app has not created any webhooks for this Shop. Add webhooks to your ShopifyApp initializer if you need webhooks</p>
<% end %>

<form method="POST" action="<%= ShopifyAPI::Product.new %>" data-shopify-app-submit="">
  <input name="authenticity_token" value="<%= form_authenticity_token %>" type="hidden">
  <p>
    <label>Name:</label>
    <input type="text" name="title"/>
  </p>
  <p>
    <label>Body</label>
    <input type="text" name="body_html"/>
  </p>
  <p>
    <label>Vendor:</label>
    <input type="text" name="vendor"/>
  </p>
  <p>
    <label>Product Type:</label>
    <input type="text" name="product_type"/>
  </p>
  <p>
    <label>Tags:</label>
    <input type="text" name="tags"/>
  </p>

  <input type="submit">

</form>
